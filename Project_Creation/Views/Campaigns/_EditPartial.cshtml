@model Project_Creation.Models.Entities.Campaign

@{
    @using Project_Creation.Models.Entities
}

<input type="hidden" id="Edit_Id" name="Id" value="@Model.Id" />

<div class="form-group mb-3">
    <label for="Edit_CampaignName" class="form-label">Campaign Name *</label>
    <input type="text" class="form-control" id="Edit_CampaignName" name="CampaignName" value="@Model.CampaignName" required>
    <span class="text-danger field-validation-valid" data-valmsg-for="CampaignName" data-valmsg-replace="true"></span>
</div>

<div class="form-group mb-3">
    <label for="Edit_Message" class="form-label">Message *</label>
    <textarea class="form-control" id="Edit_Message" name="Message" rows="5" required>@Model.Message</textarea>
    <span class="text-danger field-validation-valid" data-valmsg-for="Message" data-valmsg-replace="true"></span>
</div>

<div class="form-group mb-3">
    <div class="form-check">
        <input class="form-check-input" type="checkbox" id="Edit_SendToAll" name="SendToAll" @(Model.SendToAll ? "checked" : "")>
        <label class="form-check-label" for="Edit_SendToAll">Send to all leads</label>
    </div>

    <div id="editTargetProductsContainer" @(Model.SendToAll ? "style=display:none;" : "")>
        <label class="form-label">Target products</label>
        <div class="input-group mb-2">
            <input type="text" class="form-control product-search" placeholder="Search products...">
        </div>
        <div class="border p-2 product-checkbox-container" style="max-height: 200px; overflow-y: auto;">
            @foreach (var product in ViewBag.Products as List<Product2>)
            {
                var isSelected = Model.TargetProducts?.Split(',').Contains(product.Id.ToString()) ?? false;
                <div class="form-check product-item">
                    <input class="form-check-input" type="checkbox"
                           name="SelectedProductIds" value="@product.Id"
                    @(isSelected ? "checked" : "")>
                    <label class="form-check-label">@product.ProductName</label>
                </div>
            }
        </div>
    </div>
</div>

<div class="form-group mb-3">
    <label for="Edit_Notes" class="form-label">Notes</label>
    <textarea class="form-control" id="Edit_Notes" name="Notes">@Model.Notes</textarea>
</div>